<!DOCTYPE html>
<html lang="pt_BR">
<head>
    <title>Webjump | Trilha 01 | Wjcrypto</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="css/site.css" />
</head>

<body>
    <header>
      <div class="imgcontainer">
        <img src="webjump-entreprise.png" alt="Avatar" class="avatar">
      </div>
    </header>
<!--    <form action="index.php" method="post">-->
        <div class="container">
          <label for="uemail"><b>Email</b></label>
            <input type="text" id="uemail" placeholder="Enter Email" name="email" required>
            <label for="psw"><b>Password</b></label>
            <input type="password" id="psw" placeholder="Enter Password" name="password" required>
        </div>
<!--    </form>-->
            <button type="submit" name="action" id="submit-action-login" class="action login" value="login">Login</button>
    <div class="container">
        <a href="newUserForm.html">
        <button style="width: 1820px" type="submit">Novo usuario</button>
        </a>
    </div>
</body>
<script>
    var botaoSubit = document.querySelector("#submit-action-login");
    botaoSubit.addEventListener('click', login);

    function login() {
        let userLogin = document.querySelector("#uemail");
        let pswLogin = document.querySelector("#psw");
        var args = {
            'email':userLogin.value,
            'password':pswLogin.value,
            'action':'login'
        };
        console.log(args);
        // console.log(pswLogin.value);
        var httpRequest = new XMLHttpRequest();
        httpRequest.onreadystatechange = alertContents;

        httpRequest.open('POST', 'index.php', true);
        // httpRequest.setRequestHeader('Content-Type', 'application/json;charset=UTF-8');
        httpRequest.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
        httpRequest.send('params='+JSON.stringify(args));
        function alertContents() {
            if (httpRequest.readyState === XMLHttpRequest.DONE) {
                if (httpRequest.status === 200) {
                    console.log(httpRequest.responseText);
                    sessionStorage.setItem('retorno', httpRequest.responseText);
                    window.location.href = 'newUserForm.html';
                } else {
                    console.log('Houve um problema na requisição');
                }
            }
        }
    }
</script>
</html>

multipart/form-data; boundary=<calculated when request is sent>
